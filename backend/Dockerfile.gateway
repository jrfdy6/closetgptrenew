# Lightweight Dockerfile for HTTP Gateway
# Build context: project root (Railway builds from repo root)
FROM python:3.11-slim

WORKDIR /app

# Copy requirements and install
COPY backend/requirements-gateway.txt .
RUN pip install --no-cache-dir -r requirements-gateway.txt && \
    pip list | grep firebase-admin && \
    python -c "import firebase_admin; print('âœ… firebase_admin installed successfully')"

# Copy gateway file and start script
COPY backend/mcp_http_gateway.py .
COPY backend/start_gateway.sh .
RUN chmod +x start_gateway.sh

# Expose port (Railway uses $PORT env var)
EXPOSE 8080

# Start with script that handles PORT variable
CMD ["./start_gateway.sh"]

